{"version":3,"sources":["icons.jsx","helpers.tsx","components/Login.jsx","components/data/PlaylistsData.tsx","components/ConfigDropdown.tsx","components/PlaylistSearch.tsx","components/data/TracksData.tsx","components/data/TracksBaseData.tsx","components/data/TracksArtistsData.tsx","components/data/TracksAudioFeaturesData.tsx","components/PlaylistExporter.tsx","components/PlaylistRow.jsx","components/Paginator.jsx","components/PlaylistsExporter.jsx","components/PlaylistTable.jsx","App.tsx","reportWebVitals.ts","index.tsx"],"names":["library","add","fab","faCheckCircle","faTimesCircle","faFileArchive","faHeart","faBolt","faMusic","faDownload","faCog","faSearch","faTimes","authorize","client_id","getQueryParam","window","location","href","encodeURIComponent","protocol","host","pathname","join","name","replace","results","RegExp","exec","search","decodeURIComponent","limiter","Bottleneck","maxConcurrent","minTime","on","error","jobInfo","a","response","status","retryCount","headers","Bugsnag","notify","event","addMetadata","config","apiCall","wrap","url","accessToken","axios","get","apiCallErrorHandler","isAxiosError","request","split","Login","Button","id","type","variant","size","onClick","icon","React","Component","PlaylistsData","userId","onPlaylistsLoadingStarted","onPlaylistsLoadingDone","PLAYLIST_LIMIT","SEARCH_LIMIT","data","dataInitialized","this","loadSlice","length","start","end","loadAll","query","filter","p","toLowerCase","includes","slice","offset","loadedData","i","playlistsUrl","playlistsResponse","playlistsData","Array","total","fill","splice","items","ConfigDropdown","includeArtistsDataCheck","createRef","includeAudioFeaturesDataCheck","state","spin","handleCheckClick","stopPropagation","target","nodeName","props","onConfigChanged","includeArtistsData","current","checked","includeAudioFeaturesData","setState","Dropdown","Toggle","Menu","align","Item","onClickCapture","as","Form","Check","label","ref","PlaylistSearch","searchField","searchSubmitted","handleKeyDown","key","submitSearch","preventDefault","cancelSearch","handleChange","value","onPlaylistSearch","onPlaylistSearchCancel","then","clear","blur","className","InputGroup","Control","role","placeholder","onChange","onKeyDown","Append","Text","TracksData","TracksBaseData","playlist","playlistItems","getPlaylistItems","map","track","Map","item","uri","artists","String","album","release_date","disc_number","track_number","duration_ms","explicit","popularity","added_by","added_at","requests","limit","tracks","push","trackPromises","Promise","all","trackResponses","flatMap","TracksArtistsData","ARTIST_LIMIT","artistIds","from","Set","artistPromises","artistResponses","artistsById","artist","has","genres","g","TracksAudioFeaturesData","AUDIO_FEATURES_LIMIT","trackIds","audioFeaturesPromises","audioFeatures","audio_features","audioFeaturesData","af","danceability","energy","loudness","mode","speechiness","acousticness","instrumentalness","liveness","valence","tempo","time_signature","audioFeaturesTrackIds","keys","x","forEach","trackId","set","TracksCsvFile","columnNames","lineData","tracksData","dataLabels","csvContent","sanitize","string","PlaylistExporter","csvData","blob","Blob","saveAs","fileName","tracksCsvFile","tracksBaseData","addData","tracksArtistsData","tracksAudioFeaturesData","content","PlaylistRow","exportPlaylist","export","catch","condition","style","color","renderIcon","colSpan","renderTickCross","public","collaborative","owner","display_name","Paginator","nextClick","e","onPageChanged","currentPage","prevClick","totalPages","Math","ceil","totalRecords","pageLimit","aria-label","aria-hidden","PlaylistsExporter","exportPlaylists","likedSongs","count","likedSongsLimit","likedSongsCount","playlistFileNames","playlistCsvExports","onLoadedPlaylistCountChanged","playlists","unshift","doneCount","onPlaylistExportStarted","exporter","onPlaylistsExportDone","zip","JSZip","csv","file","generateAsync","disabled","PlaylistTable","PAGE_SIZE","initialized","searching","playlistCount","progressBar","show","handlePlaylistSearch","handlePlaylistSearchCancel","setSubtitle","loadCurrentPlaylistPage","playlistSearch","likedTracksUrl","likedTracksResponse","likedTracksData","min","max","handlePlaylistsLoadingStarted","configDropdown","handlePlaylistsLoadingDone","handlePlaylistsExportDone","handlePlaylistExportStarted","playlistName","handleConfigChanged","handlePageChanged","page","subtitle","document","getElementById","textContent","ProgressBar","striped","animated","now","width","data-testid","App","view","URLSearchParams","hash","substring","fontSize","marginBottom","rel","marginTop","process","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","apiKey","plugins","BugsnagPluginReact","redactedKeys","enabledReleaseStages","onError","ErrorBoundary","getPlugin","createErrorBoundary","ReactDOM","render","StrictMode"],"mappings":"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","file":"static/js/main.ba892e75.chunk.js","sourcesContent":["import { library } from '@fortawesome/fontawesome-svg-core'\nimport { fab } from '@fortawesome/free-brands-svg-icons'\nimport { faCheckCircle, faTimesCircle, faFileArchive, faHeart } from '@fortawesome/free-regular-svg-icons'\nimport { faBolt, faMusic, faDownload, faCog, faSearch, faTimes } from '@fortawesome/free-solid-svg-icons'\n\nlibrary.add(fab, faCheckCircle, faTimesCircle, faFileArchive, faHeart, faBolt, faMusic, faDownload, faCog, faSearch, faTimes)\n","import Bugsnag from \"@bugsnag/js\"\nimport axios from \"axios\"\nimport Bottleneck from \"bottleneck\"\n\nexport function authorize() {\n  var client_id = getQueryParam('app_client_id');\n\n  // Use Exportify application client_id if none given\n  if (client_id === '') {\n    client_id = \"9950ac751e34487dbbe027c4fd7f8e99\"\n  }\n\n  window.location.href = \"https://accounts.spotify.com/authorize\" +\n    \"?client_id=\" + client_id +\n    \"&redirect_uri=\" + encodeURIComponent([window.location.protocol, '//', window.location.host, window.location.pathname].join('')) +\n    \"&scope=playlist-read-private%20playlist-read-collaborative%20user-library-read\" +\n    \"&response_type=token\";\n}\n\n// http://stackoverflow.com/a/901144/4167042\nexport function getQueryParam(name: string) {\n  name = name.replace(/[[]/, \"\\\\[\").replace(/[\\]]/, \"\\\\]\");\n  var regex = new RegExp(\"[\\\\?&]\" + name + \"=([^&#]*)\"),\n      results = regex.exec(window.location.search);\n  return results === null ? \"\" : decodeURIComponent(results[1].replace(/\\+/g, \" \"));\n}\n\n\nconst REQUEST_RETRY_BUFFER = 1000\nconst MAX_RATE_LIMIT_RETRIES = 2 // 3 attempts in total\nconst limiter = new Bottleneck({\n  maxConcurrent: 1,\n  minTime: 0\n})\n\nlimiter.on(\"failed\", async (error, jobInfo) => {\n  if (error.response.status === 429 && jobInfo.retryCount < MAX_RATE_LIMIT_RETRIES) {\n    // Retry according to the indication from the server with a small buffer\n    return ((error.response.headers[\"retry-after\"] || 1) * 1000) + REQUEST_RETRY_BUFFER\n  } else if (error.response.status !== 401 && error.response.status !== 429 && jobInfo.retryCount === 0) {\n    // Log and retry any other failure once (e.g. 503/504 which sometimes occur)\n    Bugsnag.notify(\n      error,\n      (event) => {\n        event.addMetadata(\"response\", error.response)\n        event.addMetadata(\"request\", error.config)\n      }\n    )\n\n    return REQUEST_RETRY_BUFFER\n  }\n})\n\nexport const apiCall = limiter.wrap(function(url: string, accessToken: string) {\n  return axios.get(url, { headers: { 'Authorization': 'Bearer ' + accessToken } })\n})\n\nexport function apiCallErrorHandler(error: any) {\n  if (error.isAxiosError) {\n    if (error.request.status === 401) {\n      // Return to home page after auth token expiry\n      window.location.href = window.location.href.split('#')[0]\n      return\n    }\n  }\n\n  throw error\n}\n","import React from \"react\"\nimport { Button } from \"react-bootstrap\"\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\"\nimport { authorize } from \"helpers\"\n\nclass Login extends React.Component {\n  render() {\n    return (\n      <Button id=\"loginButton\" type=\"submit\" variant=\"outline-secondary\" size=\"lg\" onClick={authorize}>\n        <FontAwesomeIcon icon={['far', 'check-circle']} size=\"sm\" /> Get Started\n      </Button>\n    )\n  }\n}\n\nexport default Login\n","import { apiCall } from \"helpers\"\n\n// Handles cached loading of all or subsets of playlist data\nclass PlaylistsData {\n  PLAYLIST_LIMIT = 50\n  SEARCH_LIMIT = 20\n\n  userId: string\n  private accessToken: string\n  private onPlaylistsLoadingStarted?: () => void\n  private onPlaylistsLoadingDone?: () => void\n  private data: any[]\n  private dataInitialized = false\n\n  constructor(accessToken: string, userId: string, onPlaylistsLoadingStarted?: () => void, onPlaylistsLoadingDone?: () => void) {\n    this.accessToken = accessToken\n    this.userId = userId\n    this.onPlaylistsLoadingStarted = onPlaylistsLoadingStarted\n    this.onPlaylistsLoadingDone = onPlaylistsLoadingDone\n    this.data = []\n  }\n\n  async total() {\n    if (!this.dataInitialized) {\n      await this.loadSlice()\n    }\n\n    return this.data.length\n  }\n\n  async slice(start: number, end: number) {\n    return await this.loadSlice(start, end)\n  }\n\n  async all() {\n    await this.loadAll()\n\n    return this.data\n  }\n\n  async search(query: string) {\n    await this.loadAll()\n\n    // Case-insensitive search in playlist name\n    // TODO: Add lazy evaluation for performance?\n    return this.data\n      .filter(p => p.name.toLowerCase().includes(query.toLowerCase()))\n      .slice(0, this.SEARCH_LIMIT)\n  }\n\n  async loadAll() {\n    if (this.onPlaylistsLoadingStarted) {\n      this.onPlaylistsLoadingStarted()\n    }\n\n    await this.loadSlice()\n\n    // Get the rest of them if necessary\n    for (var offset = this.PLAYLIST_LIMIT; offset < this.data.length; offset = offset + this.PLAYLIST_LIMIT) {\n      await this.loadSlice(offset, offset + this.PLAYLIST_LIMIT)\n    }\n\n    if (this.onPlaylistsLoadingDone) {\n      this.onPlaylistsLoadingDone()\n    }\n  }\n\n  private async loadSlice(start = 0, end = start + this.PLAYLIST_LIMIT) {\n    if (this.dataInitialized) {\n      const loadedData = this.data.slice(start, end)\n\n      if (loadedData.filter(i => !i).length === 0) {\n        return loadedData\n      }\n    }\n\n    const playlistsUrl = `https://api.spotify.com/v1/users/${this.userId}/playlists?offset=${start}&limit=${end-start}`\n    const playlistsResponse = await apiCall(playlistsUrl, this.accessToken)\n    const playlistsData = playlistsResponse.data\n\n    if (!this.dataInitialized) {\n      this.data = Array(playlistsData.total).fill(null)\n      this.dataInitialized = true\n    }\n\n    this.data.splice(start, playlistsData.items.length, ...playlistsData.items)\n\n    return playlistsData.items\n  }\n}\n\nexport default PlaylistsData\n","import './ConfigDropdown.scss'\n\nimport React from \"react\"\nimport { Dropdown, Form } from \"react-bootstrap\"\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\"\n\ntype ConfigDropdownProps = {\n  onConfigChanged: (config: any) => void\n}\n\nclass ConfigDropdown extends React.Component<ConfigDropdownProps> {\n  private includeArtistsDataCheck = React.createRef<HTMLInputElement>()\n  private includeAudioFeaturesDataCheck = React.createRef<HTMLInputElement>()\n\n  state = {\n    spin: false\n  }\n\n  handleCheckClick = (event: React.MouseEvent) => {\n    event.stopPropagation()\n\n    if ((event.target as HTMLElement).nodeName === \"INPUT\") {\n      this.props.onConfigChanged({\n        includeArtistsData: this.includeArtistsDataCheck.current?.checked || false,\n        includeAudioFeaturesData: this.includeAudioFeaturesDataCheck.current?.checked || false\n      })\n    }\n  }\n\n  spin(spin: boolean) {\n    this.setState({ spin: spin })\n  }\n\n  render() {\n    return (\n      <Dropdown>\n        <Dropdown.Toggle variant=\"link\">\n          <FontAwesomeIcon icon={['fas', 'cog']} size=\"lg\" spin={this.state.spin} />\n        </Dropdown.Toggle>\n        <Dropdown.Menu align=\"right\">\n          <Dropdown.Item onClickCapture={this.handleCheckClick} as=\"div\">\n            <Form.Check\n              id=\"config-include-artists-data\"\n              type=\"switch\"\n              label=\"Include artists data\"\n              ref={this.includeArtistsDataCheck}\n            />\n          </Dropdown.Item>\n          <Dropdown.Item onClickCapture={this.handleCheckClick} as=\"div\">\n            <Form.Check\n              id=\"config-include-audio-features-data\"\n              type=\"switch\"\n              label=\"Include audio features data\"\n              ref={this.includeAudioFeaturesDataCheck}/>\n          </Dropdown.Item>\n        </Dropdown.Menu>\n      </Dropdown>\n    )\n  }\n}\n\nexport default ConfigDropdown\n","import './PlaylistSearch.scss'\n\nimport React from \"react\"\nimport { Form, InputGroup } from \"react-bootstrap\"\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\"\n\ntype PlaylistSearchProps = {\n  onPlaylistSearch: (query: string) => void\n  onPlaylistSearchCancel: () => Promise<any>\n}\n\nclass PlaylistSearch extends React.Component<PlaylistSearchProps> {\n  private searchField = React.createRef<HTMLInputElement>()\n\n  state = {\n    searchSubmitted: false,\n    query: \"\"\n  }\n\n  clear() {\n    this.setState(\n      { searchSubmitted: false, query: \"\" },\n      () => {\n        if (this.searchField.current) {\n          this.searchField.current.value = \"\"\n        }\n      }\n    )\n  }\n\n  handleKeyDown = (event: React.KeyboardEvent) => {\n    event.stopPropagation()\n\n    if (event.key === 'Enter') {\n      this.submitSearch()\n\n      event.preventDefault()\n    } else if (event.key === 'Escape') {\n      this.cancelSearch()\n    }\n  }\n\n  handleChange = (event: React.ChangeEvent<HTMLInputElement>) => {\n    this.setState({ query: event.target.value })\n  }\n\n  private submitSearch = () => {\n    if (this.state.query.length > 0) {\n      this.setState(\n        { searchSubmitted: true },\n        () => { this.props.onPlaylistSearch(this.state.query) }\n      )\n    }\n  }\n\n  private cancelSearch = () => {\n    this.props.onPlaylistSearchCancel().then(() => {\n      this.clear()\n\n      if (this.searchField.current) {\n        this.searchField.current.blur()\n      }\n    })\n  }\n\n  render() {\n    const icon = (this.state.searchSubmitted)\n      ? <FontAwesomeIcon icon={['fas', 'times']} size=\"sm\" onClick={this.cancelSearch} className=\"closeIcon\" />\n      : <FontAwesomeIcon icon={['fas', 'search']} size=\"sm\" onClick={this.submitSearch} className=\"searchIcon\" />\n\n    const className = this.state.query.length > 0 ? \"search queryPresent\" : \"search\"\n\n    return (\n      <Form className={className}>\n        <InputGroup>\n          <Form.Control type=\"text\" role=\"searchbox\" placeholder=\"Search\" size=\"sm\" onChange={this.handleChange} onKeyDown={this.handleKeyDown} ref={this.searchField} className=\"border-right-0 border\" />\n          <InputGroup.Append>\n            <InputGroup.Text className=\"bg-transparent\">\n              {icon}\n            </InputGroup.Text>\n          </InputGroup.Append>\n        </InputGroup>\n      </Form>\n    )\n  }\n}\n\nexport default PlaylistSearch\n","abstract class TracksData {\n  accessToken: string\n\n  constructor(accessToken: string) {\n    this.accessToken = accessToken\n  }\n\n  abstract dataLabels(): string[]\n  abstract data(): Promise<Map<string, string[]>>\n}\n\nexport default TracksData\n","import TracksData from \"./TracksData\"\nimport { apiCall } from \"helpers\"\n\nclass TracksBaseData extends TracksData {\n  playlist: any\n\n  constructor(accessToken: string, playlist: any) {\n    super(accessToken)\n    this.playlist = playlist\n  }\n\n  dataLabels() {\n    return [\n      \"Track URI\",\n      \"Track Name\",\n      \"Artist URI\",\n      \"Artist Name\",\n      \"Album URI\",\n      \"Album Name\",\n      \"Album Release Date\",\n      \"Disc Number\",\n      \"Track Number\",\n      \"Track Duration (ms)\",\n      \"Explicit\",\n      \"Popularity\",\n      \"Added By\",\n      \"Added At\"\n    ]\n  }\n\n  async tracks() {\n    await this.getPlaylistItems()\n\n    return this.playlistItems.map(i => i.track)\n  }\n\n  async data() {\n    await this.getPlaylistItems()\n\n    return new Map(this.playlistItems.map(item => {\n      return [\n        item.track.id,\n        [\n          item.track.uri,\n          item.track.name,\n          item.track.artists.map((a: any) => { return a.uri }).join(', '),\n          item.track.artists.map((a: any) => { return String(a.name).replace(/,/g, \"\\\\,\") }).join(', '),\n          item.track.album.uri,\n          item.track.album.name,\n          item.track.album.release_date,\n          item.track.disc_number,\n          item.track.track_number,\n          item.track.duration_ms,\n          item.track.explicit,\n          item.track.popularity,\n          item.added_by == null ? '' : item.added_by.uri,\n          item.added_at\n        ]\n      ]\n    }))\n  }\n\n  // Memoization supporting multiple calls\n  private playlistItems: any[] = []\n  private async getPlaylistItems() {\n    if (this.playlistItems.length > 0) {\n      return this.playlistItems\n    }\n\n    var requests = []\n    var limit = this.playlist.tracks.limit || 100\n\n    for (var offset = 0; offset < this.playlist.tracks.total; offset = offset + limit) {\n      requests.push(`${this.playlist.tracks.href.split('?')[0]}?offset=${offset}&limit=${limit}`)\n    }\n\n    const trackPromises = requests.map(request => { return apiCall(request, this.accessToken) })\n    const trackResponses = await Promise.all(trackPromises)\n\n    this.playlistItems = trackResponses.flatMap(response => {\n      return response.data.items.filter((i: any) => i.track) // Exclude null track attributes\n    })\n  }\n}\n\nexport default TracksBaseData\n","import TracksData from \"./TracksData\"\nimport { apiCall } from \"helpers\"\n\nclass TracksArtistsData extends TracksData {\n  ARTIST_LIMIT = 50\n\n  tracks: any[]\n\n  constructor(accessToken: string, tracks: any[]) {\n    super(accessToken)\n    this.tracks = tracks\n  }\n\n  dataLabels() {\n    return [\n      \"Artist Genres\"\n    ]\n  }\n\n  async data() {\n    const artistIds = Array.from(new Set(this.tracks.flatMap((track: any) => {\n      return track\n        .artists\n        .filter((a: any) => a.type === \"artist\")\n        .map((a: any) => a.id)\n        .filter((i: string) => i)\n    })))\n\n    let requests = []\n\n    for (var offset = 0; offset < artistIds.length; offset = offset + this.ARTIST_LIMIT) {\n      requests.push(`https://api.spotify.com/v1/artists?ids=${artistIds.slice(offset, offset + this.ARTIST_LIMIT)}`)\n    }\n\n    const artistPromises = requests.map(request => { return apiCall(request, this.accessToken) })\n    const artistResponses = await Promise.all(artistPromises)\n\n    const artistsById = new Map(artistResponses.flatMap((response) => response.data.artists).map((artist: any) => [artist.id, artist]))\n\n    return new Map<string, string[]>(this.tracks.map((track: any) => {\n      return [\n        track.id,\n        [\n          track.artists.map((a: any) => {\n            return artistsById.has(a.id) ? artistsById.get(a.id)!.genres.filter((g: string) => g).join(',') : \"\"\n          }).filter((g: string) => g).join(\",\")\n        ]\n      ]\n    }))\n  }\n}\n\nexport default TracksArtistsData\n","import TracksData from \"./TracksData\"\nimport { apiCall } from \"helpers\"\n\nclass TracksAudioFeaturesData extends TracksData {\n  AUDIO_FEATURES_LIMIT = 100\n\n  tracks: any[]\n\n  constructor(accessToken: string, tracks: any[]) {\n    super(accessToken)\n    this.tracks = tracks\n  }\n\n  dataLabels() {\n    return [\n      \"Danceability\",\n      \"Energy\",\n      \"Key\",\n      \"Loudness\",\n      \"Mode\",\n      \"Speechiness\",\n      \"Acousticness\",\n      \"Instrumentalness\",\n      \"Liveness\",\n      \"Valence\",\n      \"Tempo\",\n      \"Time Signature\"\n    ]\n  }\n\n  async data() {\n    const trackIds = this.tracks.map((track: any) => track.id)\n\n    let requests = []\n\n    for (var offset = 0; offset < trackIds.length; offset = offset + this.AUDIO_FEATURES_LIMIT) {\n      requests.push(`https://api.spotify.com/v1/audio-features?ids=${trackIds.slice(offset, offset + this.AUDIO_FEATURES_LIMIT)}`)\n    }\n\n    const audioFeaturesPromises = requests.map(request => { return apiCall(request, this.accessToken) })\n    const audioFeatures = (await Promise.all(audioFeaturesPromises)).flatMap((response) => response.data.audio_features)\n\n    const audioFeaturesData = new Map<string, string[]>(audioFeatures.filter((af: any) => af).map((audioFeatures: any) => {\n      return [\n        audioFeatures.id,\n        [\n          audioFeatures.danceability,\n          audioFeatures.energy,\n          audioFeatures.key,\n          audioFeatures.loudness,\n          audioFeatures.mode,\n          audioFeatures.speechiness,\n          audioFeatures.acousticness,\n          audioFeatures.instrumentalness,\n          audioFeatures.liveness,\n          audioFeatures.valence,\n          audioFeatures.tempo,\n          audioFeatures.time_signature\n        ]\n      ]\n    }))\n\n    // Add empty fields where we didn't get data - can be the case for example with episodes\n    const audioFeaturesTrackIds = Array.from(audioFeaturesData.keys())\n    trackIds.filter(x => !audioFeaturesTrackIds.includes(x)).forEach((trackId) => {\n      audioFeaturesData.set(trackId, [\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\"])\n    })\n\n    return audioFeaturesData\n  }\n}\n\nexport default TracksAudioFeaturesData\n","import { saveAs } from \"file-saver\"\n\nimport TracksData from \"components/data/TracksData\"\nimport TracksBaseData from \"components/data/TracksBaseData\"\nimport TracksArtistsData from \"components/data/TracksArtistsData\"\nimport TracksAudioFeaturesData from \"components/data/TracksAudioFeaturesData\"\n\nclass TracksCsvFile {\n  playlist: any\n  columnNames: string[]\n  lineData: Map<string, string[]>\n\n  constructor(playlist: any) {\n    this.playlist = playlist\n    this.columnNames = []\n    this.lineData = new Map()\n  }\n\n  async addData(tracksData: TracksData) {\n    this.columnNames.push(...tracksData.dataLabels())\n\n    const data: Map<string, string[]> = await tracksData.data()\n\n    data.forEach((value: string[], key: string) => {\n      if (this.lineData.has(key)) {\n        this.lineData.get(key)!.push(...value)\n      } else {\n        this.lineData.set(key, value)\n      }\n    })\n  }\n\n  content(): string {\n    let csvContent = ''\n\n    csvContent += this.columnNames.map(this.sanitize).join() + \"\\n\"\n\n    this.lineData.forEach((lineData, trackId) => {\n      csvContent += lineData.map(this.sanitize).join(\",\") + \"\\n\"\n    })\n\n    return csvContent\n  }\n\n  sanitize(string: string): string {\n    return '\"' + String(string).replace(/\"/g, '\"\"') + '\"'\n  }\n}\n\n// Handles exporting a single playlist as a CSV file\nclass PlaylistExporter {\n  accessToken: string\n  playlist: any\n  config: any\n\n  constructor(accessToken: string, playlist: any, config: any) {\n    this.accessToken = accessToken\n    this.playlist = playlist\n    this.config = config\n  }\n\n  async export() {\n    return this.csvData().then((data) => {\n      var blob = new Blob([ data ], { type: \"text/csv;charset=utf-8\" })\n      saveAs(blob, this.fileName(), true)\n    })\n  }\n\n  async csvData() {\n    const tracksCsvFile = new TracksCsvFile(this.playlist)\n    const tracksBaseData = new TracksBaseData(this.accessToken, this.playlist)\n\n    await tracksCsvFile.addData(tracksBaseData)\n    const tracks = await tracksBaseData.tracks()\n\n    if (this.config.includeArtistsData) {\n      const tracksArtistsData = new TracksArtistsData(this.accessToken, tracks)\n      await tracksCsvFile.addData(tracksArtistsData)\n    }\n\n    if (this.config.includeAudioFeaturesData) {\n      const tracksAudioFeaturesData = new TracksAudioFeaturesData(this.accessToken, tracks)\n      await tracksCsvFile.addData(tracksAudioFeaturesData)\n    }\n\n    tracksBaseData.tracks()\n\n    return tracksCsvFile.content()\n  }\n\n  fileName(): string {\n    return this.playlist.name.replace(/[\\x00-\\x1F\\x7F/\\\\<>:;\"|=,.?*[\\] ]+/g, \"_\").toLowerCase() + \".csv\" // eslint-disable-line no-control-regex\n  }\n}\n\nexport default PlaylistExporter\n","import React from \"react\"\nimport { Button } from \"react-bootstrap\"\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\"\n\nimport { apiCallErrorHandler } from \"helpers\"\nimport PlaylistExporter from \"./PlaylistExporter\"\n\nclass PlaylistRow extends React.Component {\n  exportPlaylist = () => {\n    (new PlaylistExporter(\n      this.props.accessToken,\n      this.props.playlist,\n      this.props.config\n    )).export().catch(apiCallErrorHandler)\n  }\n\n  renderTickCross(condition) {\n    if (condition) {\n      return <FontAwesomeIcon icon={['far', 'check-circle']} size=\"sm\" />\n    } else {\n      return <FontAwesomeIcon icon={['far', 'times-circle']} size=\"sm\" style={{ color: '#ECEBE8' }} />\n    }\n  }\n\n  renderIcon(playlist) {\n    if (playlist.name === 'Liked') {\n      return <FontAwesomeIcon icon={['far', 'heart']} style={{ color: 'red' }} />;\n    } else {\n      return <FontAwesomeIcon icon={['fas', 'music']} />;\n    }\n  }\n\n  render() {\n    let playlist = this.props.playlist\n\n    if(playlist.uri==null) return (\n      <tr key={playlist.name}>\n        <td>{this.renderIcon(playlist)}</td>\n        <td>{playlist.name}</td>\n        <td colSpan=\"2\">This playlist is not supported</td>\n        <td>{this.renderTickCross(playlist.public)}</td>\n        <td>{this.renderTickCross(playlist.collaborative)}</td>\n        <td>&nbsp;</td>\n      </tr>\n    );\n\n    return (\n      <tr key={playlist.uri}>\n        <td>{this.renderIcon(playlist)}</td>\n        <td><a href={playlist.uri}>{playlist.name}</a></td>\n        <td><a href={playlist.owner.uri}>{playlist.owner.display_name}</a></td>\n        <td>{playlist.tracks.total}</td>\n        <td>{this.renderTickCross(playlist.public)}</td>\n        <td>{this.renderTickCross(playlist.collaborative)}</td>\n        <td className=\"text-right\">\n          <Button type=\"submit\" variant=\"primary\" size=\"xs\" onClick={this.exportPlaylist} className=\"text-nowrap\">\n            <FontAwesomeIcon icon={['fas', 'download']} size=\"sm\" /> Export\n          </Button>\n        </td>\n      </tr>\n    );\n  }\n}\n\nexport default PlaylistRow\n","import React from \"react\"\n\nclass Paginator extends React.Component {\n  nextClick = (e) => {\n    e.preventDefault()\n\n    this.props.onPageChanged(this.props.currentPage + 1)\n  }\n\n  prevClick = (e) => {\n    e.preventDefault()\n\n    this.props.onPageChanged(this.props.currentPage - 1)\n  }\n\n  totalPages = () => {\n    return Math.ceil(this.props.totalRecords / this.props.pageLimit)\n  }\n\n  render() {\n    return (\n      <nav className=\"paginator text-right\">\n        <ul className=\"pagination pagination-sm\">\n          <li className={this.props.currentPage <= 1 ? 'page-item disabled' : 'page-item'}>\n            { /* eslint-disable-next-line  */ }\n            <a className=\"page-link\" href=\"#\" aria-label=\"Previous\" onClick={this.prevClick}>\n              <span aria-hidden=\"true\">&laquo;</span>\n            </a>\n          </li>\n          <li className={this.props.currentPage >= this.totalPages() ? 'page-item disabled' : 'page-item'}>\n            { /* eslint-disable-next-line  */ }\n            <a className=\"page-link\" href=\"#\" aria-label=\"Next\" onClick={this.nextClick}>\n              <span aria-hidden=\"true\">&raquo;</span>\n            </a>\n          </li>\n        </ul>\n      </nav>\n    )\n  }\n}\n\nexport default Paginator\n","import React from \"react\"\nimport { Button } from \"react-bootstrap\"\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\"\nimport { saveAs } from \"file-saver\"\nimport JSZip from \"jszip\"\n\nimport PlaylistExporter from \"./PlaylistExporter\"\nimport { apiCallErrorHandler } from \"helpers\"\n\n// Handles exporting all playlist data as a zip file\nclass PlaylistsExporter extends React.Component {\n  async export(accessToken, playlistsData, likedSongsLimit, likedSongsCount, config) {\n    let playlistFileNames = []\n    let playlistCsvExports = []\n\n    const playlists = await playlistsData.all(this.props.onLoadedPlaylistCountChanged)\n\n    // Add library of saved tracks\n    playlists.unshift({\n      \"id\": \"liked\",\n      \"name\": \"Liked\",\n      \"tracks\": {\n        \"href\": \"https://api.spotify.com/v1/me/tracks\",\n        \"limit\": likedSongsLimit,\n        \"total\": likedSongsCount\n      },\n    })\n\n    let doneCount = 0\n\n    for (const playlist of playlists) {\n      this.props.onPlaylistExportStarted(playlist.name, doneCount)\n\n      let exporter = new PlaylistExporter(accessToken, playlist, config)\n      let csvData = await exporter.csvData()\n\n      playlistFileNames.push(exporter.fileName(playlist))\n      playlistCsvExports.push(csvData)\n\n      doneCount++\n    }\n\n    this.props.onPlaylistsExportDone()\n\n    var zip = new JSZip()\n\n    playlistCsvExports.forEach(function(csv, i) {\n      zip.file(playlistFileNames[i], csv)\n    })\n\n    zip.generateAsync({ type: \"blob\" }).then(function(content) {\n      saveAs(content, \"spotify_playlists.zip\");\n    })\n  }\n\n  exportPlaylists = () => {\n    this.export(\n      this.props.accessToken,\n      this.props.playlistsData,\n      this.props.likedSongs.limit,\n      this.props.likedSongs.count,\n      this.props.config\n    ).catch(apiCallErrorHandler)\n  }\n\n  render() {\n    return <Button type=\"submit\" variant=\"outline-secondary\" size=\"xs\" onClick={this.exportPlaylists} className=\"text-nowrap\" disabled={this.props.disabled}>\n      <FontAwesomeIcon icon={['far', 'file-archive']}/> Export All\n    </Button>\n  }\n}\n\nexport default PlaylistsExporter\n","import React from \"react\"\nimport { ProgressBar } from \"react-bootstrap\"\n\nimport PlaylistsData from \"./data/PlaylistsData\"\nimport ConfigDropdown from \"./ConfigDropdown\"\nimport PlaylistSearch from \"./PlaylistSearch\"\nimport PlaylistRow from \"./PlaylistRow\"\nimport Paginator from \"./Paginator\"\nimport PlaylistsExporter from \"./PlaylistsExporter\"\nimport { apiCall, apiCallErrorHandler } from \"helpers\"\n\nclass PlaylistTable extends React.Component {\n  PAGE_SIZE = 20\n\n  userId = null\n  playlistsData = null\n\n  state = {\n    initialized: false,\n    searching: false,\n    playlists: [],\n    playlistCount: 0,\n    likedSongs: {\n      limit: 0,\n      count: 0\n    },\n    currentPage: 1,\n    progressBar: {\n      show: false,\n      label: \"\",\n      value: 0\n    },\n    config: {\n      includeArtistsData: false,\n      includeAudioFeaturesData: false\n    }\n  }\n\n  constructor(props) {\n    super(props)\n\n    this.configDropdown = React.createRef()\n    this.playlistSearch = React.createRef()\n\n    if (props.config) {\n      this.state.config = props.config\n    }\n  }\n\n  handlePlaylistSearch = async (query) => {\n    if (query.length === 0) {\n      this.handlePlaylistSearchCancel()\n    } else {\n      const playlists = await this.playlistsData.search(query).catch(apiCallErrorHandler)\n\n      this.setState({\n        searching: true,\n        playlists: playlists,\n        playlistCount: playlists.length,\n        currentPage: 1\n      })\n\n      if (playlists.length === this.playlistsData.SEARCH_LIMIT) {\n        this.setSubtitle(`First ${playlists.length} results with \"${query}\" in playlist name`)\n      } else {\n        this.setSubtitle(`${playlists.length} results with \"${query}\" in playlist name`)\n      }\n    }\n  }\n\n  handlePlaylistSearchCancel = () => {\n    return this.loadCurrentPlaylistPage().catch(apiCallErrorHandler)\n  }\n\n  loadCurrentPlaylistPage = async () => {\n    if (this.playlistSearch.current) {\n      this.playlistSearch.current.clear()\n    }\n\n    const playlists = await this.playlistsData.slice(\n      ((this.state.currentPage - 1) * this.PAGE_SIZE),\n      ((this.state.currentPage - 1) * this.PAGE_SIZE) + this.PAGE_SIZE\n    ).catch(apiCallErrorHandler)\n\n    // Show library of saved tracks if viewing first page\n    if (this.state.currentPage === 1) {\n      const likedTracksUrl = `https://api.spotify.com/v1/users/${this.userId}/tracks`\n      const likedTracksResponse = await apiCall(likedTracksUrl, this.props.accessToken)\n      const likedTracksData = likedTracksResponse.data\n\n      playlists.unshift({\n        \"id\": \"liked\",\n        \"name\": \"Liked\",\n        \"public\": false,\n        \"collaborative\": false,\n        \"owner\": {\n          \"id\": this.userId,\n          \"display_name\": this.userId,\n          \"uri\": \"spotify:user:\" + this.userId\n        },\n        \"tracks\": {\n          \"href\": \"https://api.spotify.com/v1/me/tracks\",\n          \"limit\": likedTracksData.limit,\n          \"total\": likedTracksData.total\n        },\n        \"uri\": \"spotify:user:\" + this.userId + \":saved\"\n      });\n\n      // FIXME: Handle unmounting\n      this.setState({\n        likedSongs: {\n          limit: likedTracksData.limit,\n          count: likedTracksData.total\n        }\n      })\n    }\n\n    // FIXME: Handle unmounting\n    this.setState(\n      {\n        initialized: true,\n        searching: false,\n        playlists: playlists,\n        playlistCount: await this.playlistsData.total()\n      },\n      () => {\n        const min = ((this.state.currentPage - 1) * this.PAGE_SIZE) + 1\n        const max = Math.min(min + this.PAGE_SIZE - 1, this.state.playlistCount)\n        this.setSubtitle(`${min}-${max} of ${this.state.playlistCount} playlists for ${this.userId}`)\n      }\n    )\n  }\n\n  handlePlaylistsLoadingStarted = () => {\n    this.configDropdown.current.spin(true)\n  }\n\n  handlePlaylistsLoadingDone = () => {\n    this.configDropdown.current.spin(false)\n  }\n\n  handlePlaylistsExportDone = () => {\n    this.setState({\n      progressBar: {\n        show: true,\n        label: \"Done!\",\n        value: this.state.playlistCount\n      }\n    })\n  }\n\n  handlePlaylistExportStarted = (playlistName, doneCount) => {\n    this.setState({\n      progressBar: {\n        show: true,\n        label: `Exporting ${playlistName}...`,\n        value: doneCount\n      }\n    })\n  }\n\n  handleConfigChanged = (config) => {\n    this.setState({ config: config })\n  }\n\n  handlePageChanged = (page) => {\n    try {\n      this.setState(\n        { currentPage: page },\n        this.loadCurrentPlaylistPage\n      )\n    } catch(error) {\n      apiCallErrorHandler(error)\n    }\n  }\n\n  setSubtitle(subtitle) {\n    if (document.getElementById(\"subtitle\") !== null) {\n      document.getElementById(\"subtitle\").textContent = subtitle\n    }\n  }\n\n  async componentDidMount() {\n    try {\n      this.userId = await apiCall(\"https://api.spotify.com/v1/me\", this.props.accessToken)\n        .then(response => response.data.id)\n      this.playlistsData = new PlaylistsData(\n        this.props.accessToken,\n        this.userId,\n        this.handlePlaylistsLoadingStarted,\n        this.handlePlaylistsLoadingDone\n      )\n\n      await this.loadCurrentPlaylistPage()\n    } catch(error) {\n      apiCallErrorHandler(error)\n    }\n  }\n\n  render() {\n    const progressBar = <ProgressBar striped variant=\"primary\" animated={this.state.progressBar.value < this.state.playlistCount} now={this.state.progressBar.value} max={this.state.playlistCount} label={this.state.progressBar.label} />\n\n    if (this.state.initialized) {\n      return (\n        <div id=\"playlists\">\n          <div id=\"playlistsHeader\">\n            <Paginator currentPage={this.state.currentPage} pageLimit={this.PAGE_SIZE} totalRecords={this.state.playlistCount} onPageChanged={this.handlePageChanged}/>\n            <PlaylistSearch onPlaylistSearch={this.handlePlaylistSearch} onPlaylistSearchCancel={this.handlePlaylistSearchCancel} ref={this.playlistSearch} />\n            <ConfigDropdown onConfigChanged={this.handleConfigChanged} ref={this.configDropdown} />\n            {this.state.progressBar.show && progressBar}\n          </div>\n          <table className=\"table table-hover table-sm\">\n            <thead>\n              <tr>\n                <th style={{width: \"30px\"}}></th>\n                <th>Name</th>\n                <th style={{width: \"150px\"}}>Owner</th>\n                <th style={{width: \"100px\"}}>Tracks</th>\n                <th style={{width: \"120px\"}}>Public?</th>\n                <th style={{width: \"120px\"}}>Collaborative?</th>\n                <th style={{width: \"100px\"}} className=\"text-right\">\n                  <PlaylistsExporter\n                    accessToken={this.props.accessToken}\n                    onPlaylistsExportDone={this.handlePlaylistsExportDone}\n                    onPlaylistExportStarted={this.handlePlaylistExportStarted}\n                    playlistsData={this.playlistsData}\n                    likedSongs={this.state.likedSongs}\n                    config={this.state.config}\n                    disabled={this.state.searching}\n                  />\n                </th>\n              </tr>\n            </thead>\n            <tbody>\n              {this.state.playlists.map((playlist, i) => {\n                return <PlaylistRow\n                  playlist={playlist}\n                  key={playlist.id}\n                  accessToken={this.props.accessToken}\n                  config={this.state.config}\n                />\n              })}\n            </tbody>\n          </table>\n          <div id=\"playlistsFooter\">\n            <Paginator currentPage={this.state.currentPage} pageLimit={this.PAGE_SIZE} totalRecords={this.state.playlistCount} onPageChanged={this.handlePageChanged}/>\n          </div>\n        </div>\n      );\n    } else {\n      return <div className=\"spinner\" data-testid=\"playlistTableSpinner\"></div>\n    }\n  }\n}\n\nexport default PlaylistTable\n","import './App.scss'\nimport \"./icons\"\n\nimport React from 'react'\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\nimport \"url-search-params-polyfill\"\n\nimport Login from 'components/Login'\nimport PlaylistTable from \"components/PlaylistTable\"\nimport { getQueryParam } from \"helpers\"\n\nfunction App() {\n  let view\n  let key = new URLSearchParams(window.location.hash.substring(1))\n\n  if (getQueryParam('rate_limit_message') !== '') {\n    view = <div id=\"rateLimitMessage\" className=\"lead\">\n      <p><FontAwesomeIcon icon={['fas', 'bolt']} style={{ fontSize: \"50px\", marginBottom: \"20px\" }} /></p>\n      <p>Oops, Exportify has encountered a <a target=\"_blank\" rel=\"noreferrer\" href=\"https://developer.spotify.com/web-api/user-guide/#rate-limiting\">rate limiting</a> error while using the Spotify API. This might be because of the number of users currently exporting playlists, or perhaps because you have too many playlists to export all at once. Try <a target=\"_blank\" rel=\"noreferrer\" href=\"https://github.com/watsonbox/exportify/issues/6#issuecomment-110793132\">creating your own</a> Spotify application. If that doesn't work, please add a comment to <a target=\"_blank\" rel=\"noreferrer\" href=\"https://github.com/watsonbox/exportify/issues/6\">this issue</a> where possible resolutions are being discussed.</p>\n      <p style={{ marginTop: \"50px\" }}>It should still be possible to export individual playlists, particularly when using your own Spotify application.</p>\n    </div>\n  } else if (key.has('access_token')) {\n    view = <PlaylistTable accessToken={key.get('access_token')} />\n  } else {\n    view = <Login />\n  }\n\n  return (\n    <div className=\"App container\">\n      <header className=\"App-header\">\n        <h1>\n          <FontAwesomeIcon icon={['fab', 'spotify']} color=\"#84BD00\" size=\"sm\" /> <a href={process.env.PUBLIC_URL}>Exportify</a>\n        </h1>\n\n        <p id=\"subtitle\" className=\"lead text-secondary\">\n          Export your Spotify playlists.\n        </p>\n      </header>\n\n      {view}\n    </div>\n  );\n}\n\nexport default App;\n","import { ReportHandler } from 'web-vitals';\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);  \n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n}\n\nexport default reportWebVitals;\n","import React from \"react\"\nimport Bugsnag from '@bugsnag/js'\nimport BugsnagPluginReact from '@bugsnag/plugin-react'\nimport ReactDOM from \"react-dom\"\nimport \"./index.scss\"\nimport App from \"./App\"\nimport reportWebVitals from \"./reportWebVitals\"\n\nBugsnag.start({\n  apiKey: 'a65916528275f084a1754a59797a36b3',\n  plugins: [new BugsnagPluginReact()],\n  redactedKeys: ['Authorization'],\n  enabledReleaseStages: [ 'production', 'staging' ],\n  onError: function (event) {\n    event.request.url = \"[REDACTED]\" // Don't send access tokens\n  }\n})\n\nconst ErrorBoundary = Bugsnag.getPlugin('react')!.createErrorBoundary(React)\n\nReactDOM.render(\n  <React.StrictMode>\n    <ErrorBoundary>\n      <App />\n    </ErrorBoundary>\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}